# Microsoft.VoiceServices
  
> [!NOTE]
> The code samples in this document are generated from API usage examples contributed by Resource Providers in their [Azure Rest API specifications](https://github.com/Azure/azure-rest-api-specs). Any issues should be reported and addressed in the source.


## microsoft.voiceservices/communicationsgateways

CreateCommunicationsGatewayResource
```bicep
resource exampleResource 'Microsoft.VoiceServices/communicationsGateways@2023-09-01' = {
  name: 'example'
  location: 'useast'
  properties: {
    apiBridge: {
      allowedAddressPrefixes: [
        '198.51.100.192/26'
      ]
      configureApiBridge: 'enabled'
    }
    autoGeneratedDomainNameLabelScope: 'NoReuse'
    codecs: [
      'PCMA'
    ]
    connectivity: 'PublicAddress'
    customSipHeaders: {
      headers: [
        {
          name: 'x-contoso-commsgw-identifier'
        }
      ]
    }
    dnsDelegations: {
      delegations: [
        {
          domain: 'commsgw.contoso.com'
        }
      ]
    }
    e911Type: 'Standard'
    platforms: [
      'OperatorConnect'
      'TeamsDirectRouting'
    ]
    serviceLocations: [
      {
        name: 'useast'
        primaryRegionProperties: {
          allowedMediaSourceAddressPrefixes: [
            '10.1.2.0/24'
          ]
          allowedSignalingSourceAddressPrefixes: [
            '10.1.1.0/24'
          ]
          operatorAddresses: [
            '198.51.100.1'
          ]
        }
      }
      {
        name: 'useast2'
        primaryRegionProperties: {
          allowedMediaSourceAddressPrefixes: [
            '10.2.2.0/24'
          ]
          allowedSignalingSourceAddressPrefixes: [
            '10.2.1.0/24'
          ]
          operatorAddresses: [
            '198.51.100.2'
          ]
        }
      }
    ]
    teamsVoicemailPilotNumber: '1234567890'
  }
  sku: {
    name: 'standard'
  }
}
```

## microsoft.voiceservices/communicationsgateways/testlines

CreateTestLineResource
```bicep
resource exampleResource 'Microsoft.VoiceServices/communicationsGateways/testLines@2023-09-01' = {
  parent: parentResource 
  name: 'example'
  location: 'useast'
  properties: {
    phoneNumber: '+1-555-1234'
    purpose: 'Automated'
  }
}
```
