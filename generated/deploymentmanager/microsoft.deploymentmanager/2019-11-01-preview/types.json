[{"13":{}},{"6":{"Value":"Microsoft.DeploymentManager/serviceTopologies"}},{"6":{"Value":"2019-11-01-preview"}},{"2":{"Name":"Microsoft.DeploymentManager/serviceTopologies","Properties":{"id":{"Type":0,"Flags":10,"Description":"The resource id"},"name":{"Type":0,"Flags":9,"Description":"The resource name"},"type":{"Type":1,"Flags":10,"Description":"The resource type"},"apiVersion":{"Type":2,"Flags":10,"Description":"The resource api version"},"properties":{"Type":4,"Flags":1,"Description":"The properties that define the service topology."},"tags":{"Type":5,"Flags":0,"Description":"Resource tags."},"location":{"Type":0,"Flags":1,"Description":"The geo-location where the resource lives"}}}},{"2":{"Name":"ServiceTopologyResourceProperties","Properties":{"artifactSourceId":{"Type":0,"Flags":0,"Description":"The resource Id of the artifact source that contains the artifacts that can be referenced in the service units."}}}},{"2":{"Name":"TrackedResourceTags","Properties":{},"AdditionalProperties":0}},{"4":{"Name":"Microsoft.DeploymentManager/serviceTopologies@2019-11-01-preview","ScopeType":8,"Body":3,"Flags":0}},{"6":{"Value":"Microsoft.DeploymentManager/serviceTopologies/services"}},{"6":{"Value":"2019-11-01-preview"}},{"2":{"Name":"Microsoft.DeploymentManager/serviceTopologies/services","Properties":{"id":{"Type":0,"Flags":10,"Description":"The resource id"},"name":{"Type":0,"Flags":9,"Description":"The resource name"},"type":{"Type":7,"Flags":10,"Description":"The resource type"},"apiVersion":{"Type":8,"Flags":10,"Description":"The resource api version"},"properties":{"Type":10,"Flags":1,"Description":"The properties that define a service in a service topology."},"tags":{"Type":11,"Flags":0,"Description":"Resource tags."},"location":{"Type":0,"Flags":1,"Description":"The geo-location where the resource lives"}}}},{"2":{"Name":"ServiceResourceProperties","Properties":{"targetLocation":{"Type":0,"Flags":1,"Description":"The Azure location to which the resources in the service belong to or should be deployed to."},"targetSubscriptionId":{"Type":0,"Flags":1,"Description":"The subscription to which the resources in the service belong to or should be deployed to."}}}},{"2":{"Name":"TrackedResourceTags","Properties":{},"AdditionalProperties":0}},{"4":{"Name":"Microsoft.DeploymentManager/serviceTopologies/services@2019-11-01-preview","ScopeType":8,"Body":9,"Flags":0}},{"6":{"Value":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits"}},{"6":{"Value":"2019-11-01-preview"}},{"2":{"Name":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","Properties":{"id":{"Type":0,"Flags":10,"Description":"The resource id"},"name":{"Type":0,"Flags":9,"Description":"The resource name"},"type":{"Type":13,"Flags":10,"Description":"The resource type"},"apiVersion":{"Type":14,"Flags":10,"Description":"The resource api version"},"properties":{"Type":16,"Flags":1,"Description":"The properties that define the service unit."},"tags":{"Type":21,"Flags":0,"Description":"Resource tags."},"location":{"Type":0,"Flags":1,"Description":"The geo-location where the resource lives"}}}},{"2":{"Name":"ServiceUnitResourceProperties","Properties":{"targetResourceGroup":{"Type":0,"Flags":1,"Description":"The Azure Resource Group to which the resources in the service unit belong to or should be deployed to."},"deploymentMode":{"Type":19,"Flags":1,"Description":"Describes the type of ARM deployment to be performed on the resource."},"artifacts":{"Type":20,"Flags":0,"Description":"The artifacts for the service unit."}}}},{"6":{"Value":"Incremental"}},{"6":{"Value":"Complete"}},{"5":{"Elements":[17,18]}},{"2":{"Name":"ServiceUnitArtifacts","Properties":{"templateUri":{"Type":0,"Flags":0,"Description":"The full URI of the ARM template file with the SAS token."},"parametersUri":{"Type":0,"Flags":0,"Description":"The full URI of the ARM parameters file with the SAS token."},"templateArtifactSourceRelativePath":{"Type":0,"Flags":0,"Description":"The path to the ARM template file relative to the artifact source."},"parametersArtifactSourceRelativePath":{"Type":0,"Flags":0,"Description":"The path to the ARM parameters file relative to the artifact source."}}}},{"2":{"Name":"TrackedResourceTags","Properties":{},"AdditionalProperties":0}},{"4":{"Name":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits@2019-11-01-preview","ScopeType":8,"Body":15,"Flags":0}},{"6":{"Value":"Microsoft.DeploymentManager/steps"}},{"6":{"Value":"2019-11-01-preview"}},{"2":{"Name":"Microsoft.DeploymentManager/steps","Properties":{"id":{"Type":0,"Flags":10,"Description":"The resource id"},"name":{"Type":0,"Flags":9,"Description":"The resource name"},"type":{"Type":23,"Flags":10,"Description":"The resource type"},"apiVersion":{"Type":24,"Flags":10,"Description":"The resource api version"},"properties":{"Type":26,"Flags":1,"Description":"The properties that define the step."},"tags":{"Type":57,"Flags":0,"Description":"Resource tags."},"location":{"Type":0,"Flags":1,"Description":"The geo-location where the resource lives"}}}},{"7":{"Name":"StepProperties","Discriminator":"stepType","BaseProperties":{},"Elements":{"HealthCheck":27,"Wait":54}}},{"2":{"Name":"HealthCheckStepProperties","Properties":{"attributes":{"Type":28,"Flags":1,"Description":"The health check step attributes"},"stepType":{"Type":53,"Flags":1,"Description":"The type of step."}}}},{"7":{"Name":"HealthCheckStepAttributes","Discriminator":"type","BaseProperties":{"waitDuration":{"Type":0,"Flags":0,"Description":"The duration in ISO 8601 format for which health check waits idly without any checks."},"maxElasticDuration":{"Type":0,"Flags":0,"Description":"The duration in ISO 8601 format for which the health check waits for the resource to become healthy. Health check fails if it doesn't. Health check starts to enforce healthyStateDuration once resource becomes healthy."},"healthyStateDuration":{"Type":0,"Flags":1,"Description":"The duration in ISO 8601 format for which the resource is expected to be continuously healthy. If maxElasticDuration is specified, healthy state duration is enforced after the detection of first healthy signal."}},"Elements":{"REST":29}}},{"2":{"Name":"RestHealthCheckStepAttributes","Properties":{"properties":{"Type":30,"Flags":0,"Description":"The REST health check parameters."},"type":{"Type":52,"Flags":1,"Description":"The type of health check."}}}},{"2":{"Name":"RestParameters","Properties":{"healthChecks":{"Type":51,"Flags":1,"Description":"The list of checks that form the health check step."}}}},{"2":{"Name":"RestHealthCheck","Properties":{"name":{"Type":0,"Flags":1,"Description":"A unique name for this check."},"request":{"Type":32,"Flags":1,"Description":"The request to the health provider."},"response":{"Type":44,"Flags":0,"Description":"The expected response from the health provider. If no expected response is provided, the default is to expect the received response to have an HTTP status code of 200 OK."}}}},{"2":{"Name":"RestRequest","Properties":{"method":{"Type":35,"Flags":1,"Description":"The HTTP method to use for the request."},"uri":{"Type":0,"Flags":1,"Description":"The HTTP URI to use for the request."},"authentication":{"Type":36,"Flags":1,"Description":"The authentication information required in the request to the health provider."}}}},{"6":{"Value":"GET"}},{"6":{"Value":"POST"}},{"5":{"Elements":[33,34]}},{"7":{"Name":"RestRequestAuthentication","Discriminator":"type","BaseProperties":{},"Elements":{"ApiKey":37,"RolloutIdentity":42}}},{"2":{"Name":"ApiKeyAuthentication","Properties":{"name":{"Type":0,"Flags":1,"Description":"The key name of the authentication key/value pair."},"in":{"Type":40,"Flags":1,"Description":"The location of the authentication key/value pair in the request."},"value":{"Type":0,"Flags":1,"Description":"The value of the authentication key/value pair."},"type":{"Type":41,"Flags":1,"Description":"The authentication type."}}}},{"6":{"Value":"Query"}},{"6":{"Value":"Header"}},{"5":{"Elements":[38,39]}},{"6":{"Value":"ApiKey"}},{"2":{"Name":"RolloutIdentityAuthentication","Properties":{"type":{"Type":43,"Flags":1,"Description":"The authentication type."}}}},{"6":{"Value":"RolloutIdentity"}},{"2":{"Name":"RestResponse","Properties":{"successStatusCodes":{"Type":45,"Flags":0,"Description":"The HTTP status codes expected in a successful health check response. The response is expected to match one of the given status codes. If no expected status codes are provided, default expected status code is 200 OK."},"regex":{"Type":46,"Flags":0,"Description":"The regular expressions to match the response content with."}}}},{"3":{"ItemType":0}},{"2":{"Name":"RestResponseRegex","Properties":{"matches":{"Type":47,"Flags":0,"Description":"The list of regular expressions."},"matchQuantifier":{"Type":50,"Flags":0,"Description":"Indicates whether any or all of the expressions should match with the response content."}}}},{"3":{"ItemType":0}},{"6":{"Value":"All"}},{"6":{"Value":"Any"}},{"5":{"Elements":[48,49]}},{"3":{"ItemType":31}},{"6":{"Value":"REST"}},{"6":{"Value":"HealthCheck"}},{"2":{"Name":"WaitStepProperties","Properties":{"attributes":{"Type":55,"Flags":1,"Description":"The Wait attributes"},"stepType":{"Type":56,"Flags":1,"Description":"The type of step."}}}},{"2":{"Name":"WaitStepAttributes","Properties":{"duration":{"Type":0,"Flags":1,"Description":"The duration in ISO 8601 format of how long the wait should be."}}}},{"6":{"Value":"Wait"}},{"2":{"Name":"TrackedResourceTags","Properties":{},"AdditionalProperties":0}},{"4":{"Name":"Microsoft.DeploymentManager/steps@2019-11-01-preview","ScopeType":8,"Body":25,"Flags":0}},{"6":{"Value":"Microsoft.DeploymentManager/rollouts"}},{"6":{"Value":"2019-11-01-preview"}},{"2":{"Name":"Microsoft.DeploymentManager/rollouts","Properties":{"id":{"Type":0,"Flags":10,"Description":"The resource id"},"name":{"Type":0,"Flags":9,"Description":"The resource name"},"type":{"Type":59,"Flags":10,"Description":"The resource type"},"apiVersion":{"Type":60,"Flags":10,"Description":"The resource api version"},"identity":{"Type":62,"Flags":1,"Description":"Identity for the resource."},"properties":{"Type":64,"Flags":1,"Description":"Defines the properties that make up a rollout request."},"tags":{"Type":90,"Flags":0,"Description":"Resource tags."},"location":{"Type":0,"Flags":1,"Description":"The geo-location where the resource lives"}}}},{"2":{"Name":"Identity","Properties":{"type":{"Type":0,"Flags":1,"Description":"The identity type."},"identityIds":{"Type":63,"Flags":1,"Description":"The list of identities."}}}},{"3":{"ItemType":0}},{"2":{"Name":"RolloutRequestPropertiesOrRolloutProperties","Properties":{"buildVersion":{"Type":0,"Flags":1,"Description":"The version of the build being deployed."},"artifactSourceId":{"Type":0,"Flags":0,"Description":"The reference to the artifact source resource Id where the payload is located."},"targetServiceTopologyId":{"Type":0,"Flags":1,"Description":"The resource Id of the service topology from which service units are being referenced in step groups to be deployed."},"stepGroups":{"Type":70,"Flags":1,"Description":"The list of step groups that define the orchestration."},"status":{"Type":0,"Flags":2,"Description":"The current status of the rollout."},"totalRetryAttempts":{"Type":71,"Flags":2,"Description":"The cardinal count of total number of retries performed on the rollout at a given time."},"operationInfo":{"Type":72,"Flags":2,"Description":"Operational information of the rollout."},"services":{"Type":89,"Flags":2,"Description":"The detailed information on the services being deployed."}}}},{"2":{"Name":"StepGroup","Properties":{"name":{"Type":0,"Flags":1,"Description":"The name of the step group."},"dependsOnStepGroups":{"Type":66,"Flags":0,"Description":"The list of step group names on which this step group depends on."},"preDeploymentSteps":{"Type":68,"Flags":0,"Description":"The list of steps to be run before deploying the target."},"deploymentTargetId":{"Type":0,"Flags":1,"Description":"The resource Id of service unit to be deployed. The service unit should be from the service topology referenced in targetServiceTopologyId"},"postDeploymentSteps":{"Type":69,"Flags":0,"Description":"The list of steps to be run after deploying the target."}}}},{"3":{"ItemType":0}},{"2":{"Name":"PrePostStep","Properties":{"stepId":{"Type":0,"Flags":1,"Description":"The resource Id of the step to be run."}}}},{"3":{"ItemType":67}},{"3":{"ItemType":67}},{"3":{"ItemType":65}},{"12":{}},{"2":{"Name":"RolloutOperationInfo","Properties":{"retryAttempt":{"Type":71,"Flags":2,"Description":"The ordinal count of the number of retry attempts on a rollout. 0 if no retries of the rollout have been performed. If the rollout is updated with a PUT, this count is reset to 0."},"skipSucceededOnRetry":{"Type":73,"Flags":2,"Description":"True, if all steps that succeeded on the previous run/attempt were chosen to be skipped in this retry attempt. False, otherwise."},"startTime":{"Type":0,"Flags":2,"Description":"The start time of the rollout in UTC."},"endTime":{"Type":0,"Flags":2,"Description":"The start time of the rollout in UTC. This property will not be set if the rollout has not completed yet."},"error":{"Type":74,"Flags":2,"Description":"The detailed error information for any failure."}}}},{"11":{}},{"2":{"Name":"CloudErrorBody","Properties":{"code":{"Type":0,"Flags":2,"Description":"Error code string."},"message":{"Type":0,"Flags":2,"Description":"Descriptive error information."},"target":{"Type":0,"Flags":0,"Description":"Error target"},"details":{"Type":75,"Flags":0,"Description":"More detailed error information."}}}},{"3":{"ItemType":74}},{"2":{"Name":"Service","Properties":{"name":{"Type":0,"Flags":0,"Description":"Name of the service."},"serviceUnits":{"Type":88,"Flags":0,"Description":"The detailed information about the units that make up the service."},"targetLocation":{"Type":0,"Flags":1,"Description":"The Azure location to which the resources in the service belong to or should be deployed to."},"targetSubscriptionId":{"Type":0,"Flags":1,"Description":"The subscription to which the resources in the service belong to or should be deployed to."}}}},{"2":{"Name":"ServiceUnit","Properties":{"name":{"Type":0,"Flags":0,"Description":"Name of the service unit."},"steps":{"Type":84,"Flags":0,"Description":"Detailed step information, if present."},"targetResourceGroup":{"Type":0,"Flags":1,"Description":"The Azure Resource Group to which the resources in the service unit belong to or should be deployed to."},"deploymentMode":{"Type":87,"Flags":1,"Description":"Describes the type of ARM deployment to be performed on the resource."},"artifacts":{"Type":20,"Flags":0,"Description":"The artifacts for the service unit."}}}},{"2":{"Name":"RolloutStep","Properties":{"name":{"Type":0,"Flags":1,"Description":"Name of the step."},"status":{"Type":0,"Flags":2,"Description":"Current state of the step."},"stepGroup":{"Type":0,"Flags":0,"Description":"The step group the current step is part of."},"operationInfo":{"Type":79,"Flags":2,"Description":"Detailed information of specific action execution."},"resourceOperations":{"Type":81,"Flags":2,"Description":"Set of resource operations that were performed, if any, on an Azure resource."},"messages":{"Type":83,"Flags":2,"Description":"Supplementary informative messages during rollout."}}}},{"2":{"Name":"StepOperationInfo","Properties":{"deploymentName":{"Type":0,"Flags":2,"Description":"The name of the ARM deployment initiated as part of the step."},"correlationId":{"Type":0,"Flags":2,"Description":"Unique identifier to track the request for ARM-based resources."},"startTime":{"Type":0,"Flags":2,"Description":"Start time of the action in UTC."},"endTime":{"Type":0,"Flags":2,"Description":"End time of the action in UTC."},"lastUpdatedTime":{"Type":0,"Flags":2,"Description":"Last time in UTC this operation was updated."},"error":{"Type":74,"Flags":0,"Description":"The errors, if any, for the action."}}}},{"2":{"Name":"ResourceOperation","Properties":{"resourceName":{"Type":0,"Flags":0,"Description":"Name of the resource as specified in the artifacts. For ARM resources, this is the name of the resource specified in the template."},"operationId":{"Type":0,"Flags":2,"Description":"Unique identifier of the operation. For ARM resources, this is the operationId obtained from ARM service."},"resourceType":{"Type":0,"Flags":0,"Description":"Type of the resource as specified in the artifacts. For ARM resources, this is the type of the resource specified in the template."},"provisioningState":{"Type":0,"Flags":2,"Description":"State of the resource deployment. For ARM resources, this is the current provisioning state of the resource."},"statusMessage":{"Type":0,"Flags":2,"Description":"Descriptive information of the resource operation."},"statusCode":{"Type":0,"Flags":2,"Description":"Http status code of the operation."}}}},{"3":{"ItemType":80}},{"2":{"Name":"Message","Properties":{"timeStamp":{"Type":0,"Flags":2,"Description":"Time in UTC this message was provided."},"message":{"Type":0,"Flags":2,"Description":"The actual message text."}}}},{"3":{"ItemType":82}},{"3":{"ItemType":78}},{"6":{"Value":"Incremental"}},{"6":{"Value":"Complete"}},{"5":{"Elements":[85,86]}},{"3":{"ItemType":77}},{"3":{"ItemType":76}},{"2":{"Name":"TrackedResourceTags","Properties":{},"AdditionalProperties":0}},{"4":{"Name":"Microsoft.DeploymentManager/rollouts@2019-11-01-preview","ScopeType":8,"Body":61,"Flags":0}},{"6":{"Value":"Microsoft.DeploymentManager/artifactSources"}},{"6":{"Value":"2019-11-01-preview"}},{"2":{"Name":"Microsoft.DeploymentManager/artifactSources","Properties":{"id":{"Type":0,"Flags":10,"Description":"The resource id"},"name":{"Type":0,"Flags":9,"Description":"The resource name"},"type":{"Type":92,"Flags":10,"Description":"The resource type"},"apiVersion":{"Type":93,"Flags":10,"Description":"The resource api version"},"properties":{"Type":95,"Flags":0,"Description":"The properties that define the artifact source."},"tags":{"Type":100,"Flags":0,"Description":"Resource tags."},"location":{"Type":0,"Flags":1,"Description":"The geo-location where the resource lives"}}}},{"2":{"Name":"ArtifactSourceProperties","Properties":{"sourceType":{"Type":0,"Flags":1,"Description":"The type of artifact source used."},"artifactRoot":{"Type":0,"Flags":0,"Description":"The path from the location that the 'authentication' property [say, a SAS URI to the blob container] refers to, to the location of the artifacts. This can be used to differentiate different versions of the artifacts. Or, different types of artifacts like binaries or templates. The location referenced by the authentication property concatenated with this optional artifactRoot path forms the artifact source location where the artifacts are expected to be found."},"authentication":{"Type":96,"Flags":1,"Description":"The authentication method to use to access the artifact source."}}}},{"7":{"Name":"Authentication","Discriminator":"type","BaseProperties":{},"Elements":{"Sas":97}}},{"2":{"Name":"SasAuthentication","Properties":{"properties":{"Type":98,"Flags":0,"Description":"The SAS properties"},"type":{"Type":99,"Flags":1,"Description":"The authentication type"}}}},{"2":{"Name":"SasProperties","Properties":{"sasUri":{"Type":0,"Flags":1,"Description":"The SAS URI to the Azure Storage blob container. Any offset from the root of the container to where the artifacts are located can be defined in the artifactRoot."}}}},{"6":{"Value":"Sas"}},{"2":{"Name":"TrackedResourceTags","Properties":{},"AdditionalProperties":0}},{"4":{"Name":"Microsoft.DeploymentManager/artifactSources@2019-11-01-preview","ScopeType":8,"Body":94,"Flags":0}}]